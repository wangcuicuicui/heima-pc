{"version":3,"sources":["webpack:///./src/views/Article/articleAdd.vue?e6d8","webpack:///src/views/Article/articleAdd.vue","webpack:///./src/views/Article/articleAdd.vue?0ca8","webpack:///./src/views/Article/articleAdd.vue","webpack:///./src/views/Article/articleAdd.vue?ddcf"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","path","_v","ref","rules","article","model","value","callback","$$v","$set","trim","expression","editorOption","cover","type","key","_e","_l","channel","id","name","on","$event","hAddArticle","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,UAAU,CAACA,EAAG,MAAM,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACJ,EAAG,gBAAgB,CAACG,MAAM,CAAC,kBAAkB,wBAAwB,CAACH,EAAG,qBAAqB,CAACG,MAAM,CAAC,GAAK,CAAEE,KAAM,OAAQ,CAACT,EAAIU,GAAG,QAAQN,EAAG,qBAAqB,CAACJ,EAAIU,GAAG,WAAW,IAAI,GAAGN,EAAG,UAAU,CAACO,IAAI,cAAcJ,MAAM,CAAC,MAAQP,EAAIY,MAAM,MAAQZ,EAAIa,QAAQ,cAAc,SAAS,CAACT,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,UAAU,CAACH,EAAG,WAAW,CAACU,MAAM,CAACC,MAAOf,EAAIa,QAAa,MAAEG,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKlB,EAAIa,QAAS,QAAyB,kBAARI,EAAkBA,EAAIE,OAAQF,IAAOG,WAAW,oBAAoB,GAAGhB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,MAAM,KAAO,YAAY,CAACH,EAAG,eAAe,CAACG,MAAM,CAAC,QAAUP,EAAIqB,cAAcP,MAAM,CAACC,MAAOf,EAAIa,QAAe,QAAEG,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKlB,EAAIa,QAAS,UAAWI,IAAMG,WAAW,sBAAsB,GAAGhB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACH,EAAG,iBAAiB,CAACU,MAAM,CAACC,MAAOf,EAAIa,QAAQS,MAAU,KAAEN,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKlB,EAAIa,QAAQS,MAAO,OAAQL,IAAMG,WAAW,uBAAuB,CAAChB,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,IAAI,CAACP,EAAIU,GAAG,QAAQN,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,IAAI,CAACP,EAAIU,GAAG,QAAQN,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,IAAI,CAACP,EAAIU,GAAG,QAAQN,EAAG,WAAW,CAACG,MAAM,CAAC,OAAS,IAAI,CAACP,EAAIU,GAAG,SAAS,IAAI,GAAIV,EAAIa,QAAQS,MAAMC,KAAO,EAAGnB,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,QAAQ,CAACoB,IAAIxB,EAAIa,QAAQS,MAAMC,KAAKZ,IAAI,QAAQJ,MAAM,CAAC,OAASP,EAAIa,QAAQS,MAAMC,SAAS,GAAGvB,EAAIyB,KAAKrB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,eAAe,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,YAAc,WAAWO,MAAM,CAACC,MAAOf,EAAIa,QAAkB,WAAEG,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKlB,EAAIa,QAAS,aAAcI,IAAMG,WAAW,uBAAuBpB,EAAI0B,GAAI1B,EAAY,UAAE,SAAS2B,GAAS,OAAOvB,EAAG,YAAY,CAACoB,IAAIG,EAAQC,GAAGrB,MAAM,CAAC,MAAQoB,EAAQE,KAAK,MAAQF,EAAQC,SAAQ,IAAI,GAAGxB,EAAG,eAAe,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWuB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO/B,EAAIgC,aAAY,MAAU,CAAChC,EAAIU,GAAG,QAAQN,EAAG,YAAY,CAAC0B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO/B,EAAIgC,aAAY,MAAS,CAAChC,EAAIU,GAAG,WAAW,IAAI,IAAI,IAAI,IACxqEuB,EAAkB,G,oECqDtB,GACE,WAAF,CAAI,YAAJ,iBAAI,MAAJ,QACE,KAAF,WACI,MAAJ,CAEM,aAAN,CACQ,YAAR,GACQ,QAAR,CACU,QAAV,CACA,uCACA,4BACA,EAAY,OAAZ,IAAY,OAAZ,IACA,EAAY,KAAZ,YAAY,KAAZ,WACA,EAAY,OAAZ,OAAY,OAAZ,OACA,aAIM,SAAN,GACM,QAAN,CACQ,MAAR,GACQ,QAAR,GACQ,MAAR,CACU,KAAV,EACU,OAAV,IAEQ,WAAR,IAEM,MAAN,CACQ,MAAR,CACA,CAAU,UAAV,EAAU,QAAV,UAAU,QAAV,QACA,CAAU,IAAV,EAAU,IAAV,GAAU,QAAV,YAAU,QAAV,SAEQ,QAAR,CACA,CAAU,UAAV,EAAU,QAAV,UAAU,QAAV,QACA,CAAU,IAAV,GAAU,IAAV,IAAU,QAAV,SAAU,QAAV,SAEQ,WAAR,CACA,CAAU,UAAV,EAAU,QAAV,UAAU,QAAV,YAKE,QAAF,CAEI,aAFJ,WAEM,IAAN,OACM,OAAN,OAAM,GAAN,kBACQ,EAAR,8BACQ,QAAR,oBAII,YATJ,SASA,GAAM,IAAN,OAGM,KAAN,2CACQ,IAAR,EAsBU,OAAV,EArBU,GAAV,wBACY,IAAZ,+BACY,EAAZ,uBAEU,OAAV,OAAU,CAAV,+BACY,EAAZ,UACc,KAAd,UACc,QAAd,WAEY,EAAZ,SACc,MAAd,GACc,QAAd,GACc,MAAd,CACgB,KAAhB,EACgB,OAAhB,IAEc,WAAd,YAUE,QAnFF,WAoFI,KAAJ,iBC1ImW,I,wBCQ/VC,EAAY,eACd,EACAnC,EACAkC,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,2CCnBf,yBAAgkB,EAAG,G","file":"js/chunk-300020e4.7c211e05.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"publish-container\"},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"评论管理\")])],1)],1),_c('el-form',{ref:\"articleForm\",attrs:{\"rules\":_vm.rules,\"model\":_vm.article,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}},[_c('el-input',{model:{value:(_vm.article.title),callback:function ($$v) {_vm.$set(_vm.article, \"title\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"article.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"内容：\",\"prop\":\"content\"}},[_c('quill-editor',{attrs:{\"options\":_vm.editorOption},model:{value:(_vm.article.content),callback:function ($$v) {_vm.$set(_vm.article, \"content\", $$v)},expression:\"article.content\"}})],1),_c('el-form-item',{attrs:{\"label\":\"封面\"}},[_c('el-radio-group',{model:{value:(_vm.article.cover.type),callback:function ($$v) {_vm.$set(_vm.article.cover, \"type\", $$v)},expression:\"article.cover.type\"}},[_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"无图\")]),_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"单图\")]),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"三图\")]),_c('el-radio',{attrs:{\"label\":-1}},[_vm._v(\"自动\")])],1)],1),(_vm.article.cover.type > 0)?_c('div',{staticClass:\"coverBox\"},[_c('Cover',{key:_vm.article.cover.type,ref:\"cover\",attrs:{\"picnum\":_vm.article.cover.type}})],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"频道\",\"prop\":\"channel_id\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择活动区域\"},model:{value:(_vm.article.channel_id),callback:function ($$v) {_vm.$set(_vm.article, \"channel_id\", $$v)},expression:\"article.channel_id\"}},_vm._l((_vm.channels),function(channel){return _c('el-option',{key:channel.id,attrs:{\"label\":channel.name,\"value\":channel.id}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.hAddArticle(false)}}},[_vm._v(\"发表\")]),_c('el-button',{on:{\"click\":function($event){return _vm.hAddArticle(true)}}},[_vm._v(\"存入草稿\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"publish-container\">\n    <el-card>\n      <div slot=\"header\" class=\"clearfix\">\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n          <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n          <el-breadcrumb-item>评论管理</el-breadcrumb-item>\n        </el-breadcrumb>\n      </div>\n      <el-form ref=\"articleForm\" :rules=\"rules\" :model=\"article\" label-width=\"80px\">\n        <el-form-item label=\"标题\" prop=\"title\">\n          <el-input v-model.trim=\"article.title\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"内容：\" prop=\"content\">\n          <quill-editor v-model=\"article.content\" :options=\"editorOption\"></quill-editor>\n        </el-form-item>\n        <el-form-item label=\"封面\">\n          <el-radio-group v-model=\"article.cover.type\">\n            <!-- 根据后端接口约定 -->\n            <el-radio :label=\"0\">无图</el-radio>\n            <el-radio :label=\"1\">单图</el-radio>\n            <el-radio :label=\"3\">三图</el-radio>\n            <el-radio :label=\"-1\">自动</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <div class=\"coverBox\" v-if=\"article.cover.type > 0\">\n          <Cover :picnum=\"article.cover.type\" :key=\"article.cover.type\" ref=\"cover\"></Cover>\n        </div>\n        <el-form-item label=\"频道\" prop=\"channel_id\">\n          <el-select v-model=\"article.channel_id\" placeholder=\"请选择活动区域\">\n            <el-option\n              v-for=\"channel in channels\"\n              :key=\"channel.id\"\n              :label=\"channel.name\"\n              :value=\"channel.id\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"hAddArticle(false)\">发表</el-button>\n          <el-button @click=\"hAddArticle(true)\">存入草稿</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import { quillEditor } from 'vue-quill-editor'\n  import 'quill/dist/quill.core.css'\n  import 'quill/dist/quill.snow.css'\n  import 'quill/dist/quill.bubble.css'\n  import { addArtice, getChannels } from '../../api/article'\n  import Cover from './Cover'\n  export default {\n    components: { quillEditor, Cover },\n    data: function () {\n      return {\n        // 富文本编辑器的配置项\n        editorOption: {\n          placeholder: '',//占位文字\n          modules: {\n            toolbar: [\n              ['bold', 'italic', 'underline', 'strike'],\n              ['blockquote', 'code-block'],\n              [{ header: 1 }, { header: 2 }],\n              [{ list: 'ordered' }, { list: 'bullet' }],\n              [{ indent: '-1' }, { indent: '+1' }],\n              ['image']\n            ]\n          }\n        },\n        channels: [],\n        article: {\n          title: '', // 文章标题\n          content: '', // 文章内容\n          cover: {\n            type: 0, // 封面图片的张数\n            images: [], // 封面的地址\n          },\n          channel_id: '', // 频道id\n        },\n        rules: {\n          title: [\n            { required: true, message: '请输入文章标题', trigger: 'blur' },\n            { min: 5, max: 30, message: '长度在5到30之间', trigger: 'blur' }\n          ],\n          content: [\n            { required: true, message: '请输入文章内容', trigger: 'blur' },\n            { min: 20, max: 30000, message: '最少20个字', trigger: 'blur' }\n          ],\n          channel_id: [\n            { required: true, message: '请选择文章频道', trigger: 'blur' }\n          ]\n        }\n      }\n    },\n    methods: {\n      // 获取频道数据\n      hGetChannels () {\n        getChannels().then(res => {\n          this.channels = res.data.data.channels\n          console.log(this.channels)\n        })\n      },\n      // 发布文章\n      hAddArticle (isDraft) {\n        // 调用Cover组件的方法\n        // 先校验字段\n        this.$refs['articleForm'].validate((valid) => {\n          if (valid) {\n            if(this.article.cover.type>0){\n              let images = this.$refs.cover.sendSelected()\n              this.article.cover.images = images\n            }\n            addArtice(isDraft, this.article).then(res => {\n                this.$message({\n                  type: 'success',\n                  message: '文章发布成功'\n                })\n                this.article = {\n                  title: '', // 文章标题\n                  content: '', // 文章内容\n                  cover: {\n                    type: 0, // 封面图片的张数\n                    images: [], // 封面的地址\n                  },\n                  channel_id: '', // 频道id\n                }\n              }\n            )\n          } else {\n            return false;\n          }\n        })\n      }\n    },\n    mounted () {\n      this.hGetChannels()\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n.coverBox {\n  padding-left: 70px;\n  margin-bottom: 20px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./articleAdd.vue?vue&type=template&id=63795144&scoped=true&\"\nimport script from \"./articleAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./articleAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./articleAdd.vue?vue&type=style&index=0&id=63795144&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63795144\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleAdd.vue?vue&type=style&index=0&id=63795144&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./articleAdd.vue?vue&type=style&index=0&id=63795144&lang=less&scoped=true&\""],"sourceRoot":""}