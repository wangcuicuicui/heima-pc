{"version":3,"sources":["webpack:///./src/views/Setting/index.vue?843c","webpack:///./src/views/Setting/index.vue?2d4c","webpack:///./src/api/setting.js","webpack:///src/views/Setting/index.vue","webpack:///./src/views/Setting/index.vue?ab5b","webpack:///./src/views/Setting/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","_s","userInfo","id","mobile","model","value","callback","$$v","$set","expression","on","updateUser","uploadPhoto","photo","staticRenderFns","userPhoto","data","request","url","method","userProfile","name","intro","email","component"],"mappings":"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","file":"js/chunk-60129bad.c1bbe378.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=25aab857&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=25aab857&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"setting-container\"},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"个人设置\")])],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form',{attrs:{\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"编号：\"}},[_vm._v(_vm._s(_vm.userInfo.id))]),_c('el-form-item',{attrs:{\"label\":\"手机：\"}},[_vm._v(_vm._s(_vm.userInfo.mobile))]),_c('el-form-item',{attrs:{\"label\":\"媒体名称：\"}},[_c('el-input',{model:{value:(_vm.userInfo.name),callback:function ($$v) {_vm.$set(_vm.userInfo, \"name\", $$v)},expression:\"userInfo.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"媒体简介：\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3},model:{value:(_vm.userInfo.intro),callback:function ($$v) {_vm.$set(_vm.userInfo, \"intro\", $$v)},expression:\"userInfo.intro\"}})],1),_c('el-form-item',{attrs:{\"label\":\"联系邮箱：\"}},[_c('el-input',{model:{value:(_vm.userInfo.email),callback:function ($$v) {_vm.$set(_vm.userInfo, \"email\", $$v)},expression:\"userInfo.email\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateUser}},[_vm._v(\"保存设置\")])],1)],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"http-request\":_vm.uploadPhoto,\"show-file-list\":false}},[(_vm.userInfo.photo)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.userInfo.photo}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_c('p',{staticClass:\"edit-photo\"},[_vm._v(\"修改头像\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '../utils/request'\nexport const userPhoto = function (data) {\n  return request({\n    url:'/mp/v1_0/user/photo',\n    method:'PATCH',\n    data\n  })\n}\nexport const userProfile = function (name,intro,email) {\n  return request({\n    url:'/mp/v1_0/user/profile',\n    method:'PATCH',\n    data:{\n      name,\n      intro,\n      email\n    }\n  })\n}\n","<template>\n  <div class='setting-container'>\n    <el-card>\n      <!-- 导航 -->\n      <div slot=\"header\">\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n          <el-breadcrumb-item>首页</el-breadcrumb-item>\n          <el-breadcrumb-item>个人设置</el-breadcrumb-item>\n        </el-breadcrumb>\n      </div>\n      <!-- 栅格 -->\n      <el-row>\n        <el-col :span=\"12\">\n          <!-- 表单 -->\n          <el-form label-width=\"120px\">\n            <el-form-item label=\"编号：\">{{userInfo.id}}</el-form-item>\n            <el-form-item label=\"手机：\">{{userInfo.mobile}}</el-form-item>\n            <el-form-item label=\"媒体名称：\">\n              <el-input v-model=\"userInfo.name\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"媒体简介：\">\n              <el-input v-model=\"userInfo.intro\" type=\"textarea\" :rows=\"3\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"联系邮箱：\">\n              <el-input v-model=\"userInfo.email\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button @click=\"updateUser\" type=\"primary\">保存设置</el-button>\n            </el-form-item>\n          </el-form>\n        </el-col>\n        <el-col :span=\"12\">\n          <!-- 上传组件 action必须属性-->\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"\"\n            :http-request=\"uploadPhoto\"\n            :show-file-list=\"false\">\n            <img v-if=\"userInfo.photo\" :src=\"userInfo.photo\" class=\"avatar\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n          <p class=\"edit-photo\">修改头像</p>\n        </el-col>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import { userGet } from '../../api/user'\n  import { userPhoto, userProfile } from '../../api/setting'\n\n  export default {\n    name: 'my-setting',\n    data () {\n      return {\n        // 用户信息\n        userInfo: {\n          name: 'test',\n          intro: 'info',\n          email: 'info@qq.com',\n          mobile: '',\n          id: '',\n          photo:''\n        },\n        // 支持上传组件的数据\n        imageUrl: null\n      }\n    },\n    methods: {\n      hGetUserProfile () {\n        userGet().then(res=>{\n          console.log(res)\n          this.userInfo = res.data.data\n        })\n      },\n      updateUser () {\n        let {name,intro,email} = this.userInfo\n        userProfile(name,intro,email).then(res => {\n          this.hGetUserProfile()\n          //  进行name传值\n          this.eventBus.$emit('getUserName',name)\n        })\n      },\n      uploadPhoto (res) {\n      //  res包含上传文件方法的对象\n      //  使用组件  会自动将上传模式转换为formdata格式\n      //  自定义转换formdata类型转换\n        let { file } = res\n        let formData = new FormData()\n        formData.append('photo',file)\n        userPhoto(formData).then(res=>{\n          this.userInfo.photo = res.data.data.photo\n          //  进行图片传值\n          this.eventBus.$emit('getUserPhoto', this.userInfo.photo)\n        })\n      }\n    },\n    mounted () {\n      this.hGetUserProfile()\n\n    }\n  }\n</script>\n\n<style scoped lang='less'>\n  .avatar{\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n  }\n  .avatar-uploader {\n    text-align: center;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar-uploader /deep/ .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .edit-photo{\n    font-size: 12px;\n    text-align: center;\n  }\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=25aab857&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=25aab857&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25aab857\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}